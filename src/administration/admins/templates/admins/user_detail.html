{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% load custom_tags %}

{% block subtitle %}
    {{ user.username }}
{% endblock %}


{% block content %}

    <div class="row mb-2">
        <div class="col-sm-6">
            <p class="mb-0">
                <a href="{% url 'admins:user-list' %}"><i class="fa fa-arrow-left"></i> Go Back</a>
            </p>
        </div>
        {% if not object.is_superuser %}
            <div class="col-sm-6">
                <p class="mb-0 text-right">
                    <a href="{% url 'admins:user-delete' object.pk %}" class="btn btn-danger">
                        <i class="fa fa-trash"></i> Remove
                    </a>
                </p>
            </div>
        {% endif %}
    </div>

    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-body">

                    {# IMAGE DIV #}
                    <div class="text-center">
                        {% if user.profile_image %}
                            <a href="{{ user.profile_image.url }}" target="_blank">
                                <img class="rounded-circle" src="{{ user.profile_image.url }}" height="150px"
                                     alt="user-image">
                            </a>
                        {% else %}
                            <img class="rounded-circle" src="https://placehold.co/150"
                                 height="150px" alt="no-user-image">
                        {% endif %}
                    </div>

                    {# NAME AND OTHER #}
                    <div class="text-center mt-4">
                        <h5 class="mb-0">
                            {{ user.get_full_name }} - ( {{ user.username }} )
                            {% if user.is_active %}
                                <i class="fa fa-check-circle text-success"></i>
                            {% endif %}
                        </h5>
                        <p class="fw-light text-muted mb-0">registered on > {{ user.date_joined }}</p>
                    </div>

                    <div class="row mt-4">
                        <div class="col">
                            <p class="mb-0 text-center h3"><i class="mdi mdi-email"></i></p>
                            <p class="mb-0 text-center h5">Email</p>
                            <p class="mb-0 text-center"><a
                                    href="mailto:{{ user.email }}"></a>{{ user.email|check_null }}</p>
                        </div>
                        <div class="col">
                            <p class="mb-0 text-center h3"><i class="bx bx-user-check "></i></p>
                            <p class="mb-0 text-center h5">Designation</p>
                            <p class="mb-0 text-center">{{ user.designation|check_null }}</p>

                        </div>
                        <div class="col">
                            <p class="mb-0 text-center h3"><i class="fa fa-id-card" aria-hidden="true"></i></p>
                            <p class="mb-0 text-center h5">Cnic</p>
                            <p class="mb-0 text-center">{{ user.cnic|check_null }}</p>
                        </div>
                        <div class="col">
                            <p class="mb-0 text-center h3"><i class="mdi mdi-phone"></i></p>
                            <p class="mb-0 text-center h5">Phone</p>
                            <p class="mb-0 text-center"><a
                                    href="tel:{{ user.phone_number }}">{{ user.phone_number|check_null }}</a></p>
                        </div>
                        <div class="col text-center">
                            <p class="mb-0 text-center h3"><i class="mdi mdi-shield-account"></i></p>
                            <p class="mb-0 text-center h5">Access Level</p>
                            <p class="mb-0 text-center">
                                <b class="text-danger">
                                    {% if user.is_staff %}
                                        {% if user.is_superuser %}
                                            <b class="text-danger">Admin</b>
                                        {% else %}
                                            <b class="text-warning">Staff</b>
                                        {% endif %}
                                    {% else %}
                                        <b class="text-primary">Member</b>
                                    {% endif %}
                                </b>
                            </p>
                        </div>
                        <div class="col text-center">
                            <p class="mb-0 text-center h3"><i class="mdi mdi-security"></i></p>
                            <p class="mb-0 text-center h5">Last Login</p>
                            <p class="mb-0 text-center">{{ user.last_login }}</p>
                        </div>

                        {% if not object.is_superuser %}
                            <div class="col">
                                <p class="mb-0 text-center h3"><i class="fa fa-user-edit"></i></p>
                                <p class="mb-0 text-center h5">Profile</p>
                                <p class="mb-0 text-center">
                                    <a href="{% url 'admins:user-update' user.pk %}">Update</a>
                                </p>
                            </div>

                            <div class="col">
                                <p class="mb-0 text-center h3"><i class="fa fa-user-lock"></i></p>
                                <p class="mb-0 text-center h5">Password</p>
                                <p class="mb-0 text-center text-danger">
                                    <a href="{% url 'admins:user-password-reset-view' user.pk %}">Change</a>
                                </p>
                            </div>
                        {% endif %}

                    </div>

                </div>
                <div class="card-body border-top">
                    <div class="row text-center">
                        <div class="col">
                            <h4 class="mb-0"><i
                                    class="bx bx-up-arrow text-success"></i> {{ object.get_total_stock_in_count }}</h4>
                        </div>
                        <div class="col border-left">
                            <h4 class="mb-0"><i
                                    class="bx bx-down-arrow text-danger"></i> {{ object.get_total_stock_out_count }}
                            </h4>
                        </div>
                        <div class="col border-left">
                            <h4 class="mb-0"><i
                                    class="bx bx-transfer text-primary"></i> {{ object.get_total_transfer_count }}</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


{% endblock %}

